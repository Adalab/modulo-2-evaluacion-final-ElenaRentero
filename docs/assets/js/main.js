"use strict";const charactersList=document.querySelector(".js-characters-list"),searchBtn=document.querySelector(".js-search-btn"),input=document.querySelector(".js-input"),sectionFavourites=document.querySelector(".js-section-favourites"),favouritesList=document.querySelector(".js-favourites-list");let allCharacters=[],favouriteCharacters=[];function renderOneCharacter(e){let t="";t=-1===favouriteCharacters.findIndex(t=>t.char_id===e.char_id)?"":"selected";const r=document.createElement("li");r.setAttribute("class",""+t),r.classList.add("characters"),r.classList.add("js-characters-card"),r.setAttribute("id",""+e.char_id);const a=document.createElement("article");a.classList.add("characters__card");const c=document.createElement("img");c.classList.add("characters__card--img"),c.setAttribute("src",""+e.img),c.setAttribute("alt",""+e.name);const s=document.createElement("h2");s.classList.add("characters__card--name");const n=document.createTextNode(""+e.name);s.appendChild(n);const i=document.createElement("p");i.classList.add("characters__card--text");const d=document.createTextNode(""+e.status);return i.appendChild(d),r.appendChild(a),a.appendChild(c),a.appendChild(s),a.appendChild(i),r}function renderAllCharacters(){charactersList.innerHTML="";for(let e=0;e<allCharacters.length;e++)charactersList.appendChild(renderOneCharacter(allCharacters[e]));addListeners()}function filterCharacters(e){return allCharacters.filter(t=>t.name.toLowerCase().includes(e))}function renderFilterCharacters(e){charactersList.innerHTML="";for(let t=0;t<e.length;t++)charactersList.appendChild(renderOneCharacter(e[t]))}function handleClick(e){e.preventDefault();renderFilterCharacters(filterCharacters(input.value.toLowerCase()))}function addListeners(){const e=document.querySelectorAll(".js-characters-card");for(const t of e)t.addEventListener("click",handleClickCard)}function renderFavourites(){sectionFavourites.style="display: none; display: block;",favouritesList.innerHTML="";for(let e=0;e<favouriteCharacters.length;e++)favouritesList.appendChild(renderOneCharacter(favouriteCharacters[e]));addListeners()}function handleClickCard(e){e.currentTarget.classList.toggle("selected");const t=allCharacters.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favouriteCharacters.push(t):favouriteCharacters.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites()}const savedFavourites=JSON.parse(localStorage.getItem("favourites"));null!==savedFavourites&&(favouriteCharacters=savedFavourites,renderFavourites()),searchBtn.addEventListener("click",handleClick);const serverUrl="https://www.breakingbadapi.com/api/characters";fetch(serverUrl,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{allCharacters=e,renderAllCharacters()}).catch(e=>console.log(e));