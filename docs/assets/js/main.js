"use strict";const charactersList=document.querySelector(".js-characters-list"),searchBtn=document.querySelector(".js-search-btn"),input=document.querySelector(".js-input"),sectionFavourites=document.querySelector(".js-section-favourites"),favouritesList=document.querySelector(".js-favourites-list");let allCharacters=[],favouriteCharacters=[];function renderOneCharacter(e){const t=document.createElement("li");t.classList.add("characters"),t.classList.add("js-characters-card"),t.setAttribute("id",""+e.char_id);const r=document.createElement("article");r.classList.add("characters__card");const a=document.createElement("img");a.classList.add("characters__card--img"),a.setAttribute("src",""+e.img),a.setAttribute("alt",""+e.name);const c=document.createElement("h2");c.classList.add("characters__card--name");const s=document.createTextNode(""+e.name);c.appendChild(s);const n=document.createElement("p");n.classList.add("characters__card--text");const i=document.createTextNode(""+e.status);return n.appendChild(i),t.appendChild(r),r.appendChild(a),r.appendChild(c),r.appendChild(n),t}function renderAllCharacters(){charactersList.innerHTML="";for(let e=0;e<allCharacters.length;e++)charactersList.appendChild(renderOneCharacter(allCharacters[e]));addListeners()}function filterCharacters(e){return allCharacters.filter(t=>t.name.toLowerCase().includes(e))}function renderFilterCharacters(e){charactersList.innerHTML="";for(let t=0;t<e.length;t++)charactersList.appendChild(renderOneCharacter(e[t]))}function handleClick(e){e.preventDefault();renderFilterCharacters(filterCharacters(input.value.toLowerCase()))}function addListeners(){const e=document.querySelectorAll(".js-characters-card");for(const t of e)t.addEventListener("click",handleClickCard)}function renderFavourites(){sectionFavourites.style="display: none; display: block;",favouritesList.innerHTML="";for(let e=0;e<favouriteCharacters.length;e++)favouritesList.appendChild(renderOneCharacter(favouriteCharacters[e]));addListeners()}function handleClickCard(e){e.currentTarget.classList.toggle("selected");const t=allCharacters.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favouriteCharacters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?favouriteCharacters.push(t):favouriteCharacters.splice(r,1),localStorage.setItem("favourites",JSON.stringify(favouriteCharacters)),renderFavourites()}const savedFavourites=JSON.parse(localStorage.getItem("favourites"));null!==savedFavourites&&(favouriteCharacters=savedFavourites,renderFavourites()),searchBtn.addEventListener("click",handleClick);const serverUrl="https://www.breakingbadapi.com/api/characters";fetch(serverUrl,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{allCharacters=e,renderAllCharacters()}).catch(e=>console.log(e));